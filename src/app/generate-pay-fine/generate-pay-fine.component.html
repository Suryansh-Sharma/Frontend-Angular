<div class="generate-fine"  id="generateFine">
<div class="input-sec w-50" *ngIf="showInput">
  <form>
    <div class="form-group">
      <label>Issuer Unique Id</label>
      <br>
      <input type="text" class="form-control" placeholder="Enter Issuer Unique Id" (change)="handleDataChange($event)">
    </div>
    <br>
    <a class="btn btn-primary" (click)="handleSubmit()">Generate Fine</a>
  </form>
</div>
<div class="page-content invoice container" *ngIf="!isLoading">
  <div class="page-header text-blue-d2" data-html2canvas-ignore="true">
    <h1 class="page-title text-secondary-d1">
      Invoice
      <small class="page-info">
        <i class="fa fa-angle-double-right text-80"></i>
        ID: #111-222
      </small>
    </h1>

    <div class="page-tools">
      <div class="action-buttons">
        <button class="btn bg-white btn-light mx-1px text-95" (click)="printInvoice()">
          <i class="mr-1 fa fa-print text-primary-m1 text-120 w-2"></i>
          Print
        </button>

      </div>
    </div>
  </div>

  <div class="container px-0 m-4">
    <div class="row mt-4">
      <div class="col-12 col-lg-12">
        <div class="row">
          <div class="col-12">
            <div class="text-center text-150">
              <i class="fa fa-book fa-2x text-success-m2 mr-1"></i>
              <span class="text-default-d3">Library Fine</span>
            </div>
          </div>
        </div>
        <!-- .row -->

        <hr class="row brc-default-l1 mx-n1 mb-4" />

        <div class="row">
          <div class="col-sm-6">
            <div>
              <span class="text-sm text-grey-m2 align-middle"><b>To: </b> </span>
              <span class="text-600 text-110 text-blue align-middle">{{issuerTotalFine.issuerInfo.name}}</span>
            </div>
            <div class="text-grey-m2">
              <div class="my-2"><i class="fa fa-circle text-blue-m2 text-xs mr-1"></i> <span class="text-600 text-90">ID:</span> {{issuerUid}}</div>
              <div class="my-1">
                <b>Issuer Class:-</b>  {{issuerTotalFine.issuerInfo.issuer_class}}
              </div>
              <div class="my-1">
                <b>Issuer Type:-</b> {{issuerTotalFine.issuerInfo.issuer_type}}
              </div>
              <div class="my-1">
                <b>Contact:-</b> {{issuerTotalFine.issuerInfo.contact}}
              </div>
              </div>
          </div>
          <!-- /.col -->

          <div class="text-95 col-sm-6 align-self-start d-sm-flex justify-content-end">
            <hr class="d-sm-none" />
            <div class="text-grey-m2">
              <div class="mt-1 mb-2 text-secondary-m1 text-600 text-125">
                Invoice
              </div>


              <div class="my-2"><i class="fa fa-circle text-blue-m2 text-xs mr-1"></i> <span class="text-600 text-90">Fine Issued On:
              </span>{{issuerTotalFine.today_date_time}}</div>
              <div class="my-2"><i class="fa fa-circle text-blue-m2 text-xs mr-1"></i> <span class="text-600 text-90">Per Day Amount:
              </span>Rs. {{issuerTotalFine.per_day_amount}}</div>
              <div class="my-2"><i class="fa fa-circle text-blue-m2 text-xs mr-1"></i> <span class="text-600 text-90">Status: {{status}}</span> <span class="badge badge-warning badge-pill px-25">Unpaid</span></div>
            </div>
          </div>
          <!-- /.col -->
        </div>

        <div class="mt-4">
          <div class="table-responsive">
            <table class="table table-bordered table-striped">
              <thead class="thead-light">
              <tr>
                <th class="d-none d-sm-table-cell">#</th>
                <th class="col-9 col-sm-5">Description</th>
                <th class="d-none d-sm-table-cell">Borrowed On</th>
                <th class="d-none d-sm-table-cell">Expected Return Date</th>
                <th class="d-none d-sm-table-cell">Pending Day</th>
                <th class="d-none d-sm-table-cell">Amount of Fine</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let fine of issuerTotalFine.fines; let i = index">
                <td class="d-none d-sm-table-cell">{{ i + 1 }}</td>
                <td>{{ fine.item_title }}</td>
                <td class="d-none d-sm-table-cell">{{ fine.borrow_date}}</td>
                <td class="d-none d-sm-table-cell">{{ fine.expected_return_date}}</td>
                <td class="d-none d-sm-table-cell">{{ fine.pending_days }}</td>
                <td>Rs. {{ fine.total_amount }}</td>
              </tr>
              </tbody>
            </table>
          </div>


          <div class="row border-b-2 brc-default-l2"></div>


          <div class="row mt-3">
            <div class="col-12 col-sm-7 text-grey-d2 text-95 mt-5">
              Sign Of Receptionist
            </div>

            <div class="col-12 col-sm-5 text-grey text-90 order-first order-sm-last">

              <div class="row my-2 align-items-center bgc-primary-l3 p-2">
                <div class="col-7 text-right">
                  Total Items:-
                </div>
                <div class="col-5">
                  <span class="text-150 text-success-d3 opacity-2">{{issuerTotalFine.total_items}}</span>
                </div>
              </div>

              <div class="row my-2 align-items-center bgc-primary-l3 p-2">
                <div class="col-7 text-right">
                  Total Amount:-
                </div>
                <div class="col-4">
                  <span class="text-150 text-success-d3 opacity-2">Rs. {{issuerTotalFine.total_amount}}</span>
                </div>
              </div>
            </div>
          </div>

          <hr />
        </div>
      </div>
    </div>
  </div>
  <div class="pay-btn-section d-flex p-2 justify-content-center" *ngIf="!hidePrint">
    <button type="button" class="btn btn-lg btn-outline-success pay-btn-section" (click)="handlePayFineBtn()" >Pay Fine</button>
  </div>
</div>
</div>
